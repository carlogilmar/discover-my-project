#!/bin/sh

echo "Git fetch..."
git fetch

echo "[running] Spawnfest 2019 :: Pre Commit Hook :: @carlogilmar"

echo "[running] mix format"
mix format

echo "[running] ===  ==="
echo "[running] mix credo"
mix credo
CREDO_RES=$?

if [ $CREDO_RES -ge 1 ]; then
  echo "======================================="
  echo "   Por favor refactoriza tu cÃ³digo "
  echo "======================================="
  echo "         :: Bonito dÃ­a ðŸ˜   :: "
  echo ""
  exit $CREDO_RES
fi
if [ $CREDO_RES -le 9 ]; then CREDO_RES=" $CREDO_RES"; fi
  echo "======================================="
  echo "    No hay warnings por corregir ðŸ˜Ž "
  echo "          :: Bonito dÃ­a :: "
  echo "======================================="

echo ""
echo ""
echo "[Done] Listo."
echo ""
echo ""

# Finished
exit 0
